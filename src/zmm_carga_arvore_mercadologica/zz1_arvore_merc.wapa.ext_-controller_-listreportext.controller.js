sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";return{onBeforeRendering:function(){this.getView().byId(this.byId("Carga_ExelButton").getId()).setIcon("sap-icon://upload")},Carga_Exel:function(e){var t=new sap.m.Dialog({contentWidth:"400px"+
,resizable:true});t.setTitle("Carregar arquivo Excel");var a="/sap/opu/odata/sap/ZMM_ARVORE_MERCADOLOGICA_SRV/";var s=new sap.ui.model.odata.ODataModel(a,false);var r=a+"CargaArvoreMercSet";var o=new sap.ui.unified.FileUploader({width:"100%",fileType:["c+
sv"],typeMissmatch:this.handleTypeMissmatch,uploadComplete:function(e){var a=this.oView.sId+"--responsiveTable";var s=this.byId(a);s.getModel().refresh(true);t.close();t.destroy();if(e.mParameters.status=="200"||e.mParameters.status=="201"){sap.m.Message+
Toast.show("Arquivo importado com sucesso!")}else{if(e.mParameters.response){sap.m.MessageBox.error("O sistema encontrou um problema ao tentar carregar o arquivo. Por favor, consulte o log para obter mais informações sobre o erro.")}}}.bind(this)});o.set+
Name("Simple Uploader");o.setUploadUrl(r);o.setSendXHR(true);o.setUseMultipart(false);o.setUploadOnChange(false);var i=new sap.ui.unified.FileUploaderParameter({name:"x-csrf-token",value:s.getSecurityToken()});o.insertHeaderParameter(i);var n=new sap.m.B+
utton({text:"Upload",type:"Accept",press:function(){var e=o.getFocusDomRef();var t=e.files[0];if(o.getValue()===""){sap.m.MessageToast.show("Favor selecionar um arquivo");return}var a=new sap.ui.unified.FileUploaderParameter({name:"Content-Type",value:t.+
type});o.insertHeaderParameter(a);o.insertHeaderParameter(new sap.ui.unified.FileUploaderParameter({name:"SLUG",value:o.getValue()}));o.upload()}.bind(this)});var l=new sap.m.Button({text:"Cancelar",type:"Reject",press:function(){t.close();t.destroy();th+
is.getView().removeAllDependents()}.bind(this)});t.addContent(o);t.setBeginButton(l);t.setEndButton(n);t.open()},handleTypeMissmatch:function(e){var t=e.getSource().getFileType();jQuery.each(t,function(e,a){t[e]="*."+a});var a=t.join(", ");sap.m.MessageT+
oast.show("Tipo de arquivo *."+e.getParameter("fileType")+" nao ? suportado. Escolha um dos tipos a seguir: "+a)},setData:function(){let e=this.getView().byId("listReportFilter").getFilters();var t=this.getView().getModel();let a=this.templateBaseExtensi+
on.getExtensionAPI().getSelectedContexts();return new Promise((a,s)=>{t.read("/ZC_MM_ARVORE_MERCADORIA",{filters:e,success:function(e,t){a(e)},error:function(e){s(e)}})})}}});                                                                                
//# sourceMappingURL=ListReportExt.controller.js.map                                                                                                                                                                                                           