var sLinha = {};                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
sap.ui.define([                                                                                                                                                                                                                                                
	'sap/ui/comp/library',                                                                                                                                                                                                                                        
	'sap/ui/core/mvc/Controller',                                                                                                                                                                                                                                 
	'sap/ui/model/type/String',                                                                                                                                                                                                                                   
	'sap/m/ColumnListItem',                                                                                                                                                                                                                                       
	'sap/m/Label',                                                                                                                                                                                                                                                
	'sap/m/SearchField',                                                                                                                                                                                                                                          
	'sap/m/Token',                                                                                                                                                                                                                                                
	'sap/ui/model/Filter',                                                                                                                                                                                                                                        
	'sap/ui/model/FilterOperator',                                                                                                                                                                                                                                
	'sap/ui/model/odata/v2/ODataModel',                                                                                                                                                                                                                           
	'sap/ui/table/Column',                                                                                                                                                                                                                                        
	'sap/m/Column',                                                                                                                                                                                                                                               
	'sap/m/Text',                                                                                                                                                                                                                                                 
    // "sap/m/MessageToast",                                                                                                                                                                                                                                   
    // "sap/m/PDFViewer"                                                                                                                                                                                                                                       
], function(                                                                                                                                                                                                                                                   
	// TextMessageToast,&nbsp;                                                                                                                                                                                                                                    
	// PDFViewer,&nbsp;                                                                                                                                                                                                                                           
	compLibrary, Controller, TypeString, ColumnListItem, Label, SearchField, Token, Filter, FilterOperator, ODataModel, UIColumn, MColumn, Text) {                                                                                                                
    "use strict";                                                                                                                                                                                                                                              
    return {                                                                                                                                                                                                                                                   
		onInit: function () {                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			// Whitespace                                                                                                                                                                                                                                               
			// this._oWhiteSpacesInput = this.byId("Material");                                                                                                                                                                                                         
			// this._oWhiteSpacesInput2 = '';                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			this._oInputUfDestino = this.byId("motivomov");                                                                                                                                                                                                             
			this._oInputUfDestino2 = '';                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			this._oInputCentro = this.byId("tipomov");                                                                                                                                                                                                                  
			this._oInputCentro2 = '';                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		// getPDFData: function () {                                                                                                                                                                                                                                 
	                                                                                                                                                                                                                                                              
		// 	// get the Model reference                                                                                                                                                                                                                               
		// 	var oModel = this.getView().getModel();                                                                                                                                                                                                                  
	                                                                                                                                                                                                                                                              
		// 	let oCtx = this.templateBaseExtension.getExtensionAPI().getSelectedContexts();                                                                                                                                                                           
		// 	return new Promise((resolve, reject) => {                                                                                                                                                                                                                
	                                                                                                                                                                                                                                                              
		// 		// Perform Read operation and pass billingdoc as parameter to URL                                                                                                                                                                                       
		// 		oModel.read("/PDF(DeliveryDocument='" + oCtx[0].getObject().DeliveryDocument + "',DeliveryDocumentItem='" + oCtx[0].getObject().DeliveryDocumentItem + "',qtdpopup='" + oCtx[0].getObject().descarga + "')", {                                          
		// 			success: function (oData, oResponse) {                                                                                                                                                                                                                 
		// 				resolve(oData);                                                                                                                                                                                                                                       
		// 			},                                                                                                                                                                                                                                                     
		// 			error: function (oError) {                                                                                                                                                                                                                             
		// 				reject(oError);                                                                                                                                                                                                                                       
		// 			}                                                                                                                                                                                                                                                      
		// 		});                                                                                                                                                                                                                                                     
		// 	})                                                                                                                                                                                                                                                       
		// },                                                                                                                                                                                                                                                        
	                                                                                                                                                                                                                                                              
		// onPDF: async function (oEvent) {                                                                                                                                                                                                                          
	                                                                                                                                                                                                                                                              
		// 	var opdfViewer = new PDFViewer();                                                                                                                                                                                                                        
		// 	this.getView().addDependent(opdfViewer);                                                                                                                                                                                                                 
		// 	// var oBusyDialog = new sap.m.BusyDialog({                                                                                                                                                                                                              
		// 	//     title: 'Gerando PDF...'                                                                                                                                                                                                                           
		// 	// });                                                                                                                                                                                                                                                   
		// 	// oBusyDialog.open();                                                                                                                                                                                                                                   
	                                                                                                                                                                                                                                                              
		// 	// Get the PDF data&nbsp;                                                                                                                                                                                                                                
		// 	var vPDF = await this.getPDFData();                                                                                                                                                                                                                      
	                                                                                                                                                                                                                                                              
		// 	if (vPDF === '') {                                                                                                                                                                                                                                       
		// 		MessageBox.error("Erro ao gerar PDF")                                                                                                                                                                                                                   
		// 		return;                                                                                                                                                                                                                                                 
		// 	}                                                                                                                                                                                                                                                        
	                                                                                                                                                                                                                                                              
		// 	let base64EncodedPDF = vPDF.results[0].stream_data;                                                                                                                                                                                                      
	                                                                                                                                                                                                                                                              
		// 	let decodedPdfContent = atob(base64EncodedPDF);                                                                                                                                                                                                          
		// 	let byteArray = new Uint8Array(decodedPdfContent.length);                                                                                                                                                                                                
		// 	for (var i = 0; i < decodedPdfContent.length; i++) {                                                                                                                                                                                                     
		// 		byteArray[i] = decodedPdfContent.charCodeAt(i);                                                                                                                                                                                                         
		// 	}                                                                                                                                                                                                                                                        
		// 	var blob = new Blob([byteArray.buffer], {                                                                                                                                                                                                                
		// 		type: 'application/pdf'                                                                                                                                                                                                                                 
		// 	});                                                                                                                                                                                                                                                      
		// 	var pdfurl = URL.createObjectURL(blob);                                                                                                                                                                                                                  
		// 	jQuery.sap.addUrlWhitelist("blob"); // register blob url as whitelist                                                                                                                                                                                    
		// 	opdfViewer.setSource(pdfurl);                                                                                                                                                                                                                            
		// 	opdfViewer.setVisible(true);                                                                                                                                                                                                                             
	                                                                                                                                                                                                                                                              
		// 	opdfViewer.setTitle("ND");                                                                                                                                                                                                                               
		// 	opdfViewer.open();                                                                                                                                                                                                                                       
		// 	// oBusyDialog.close();                                                                                                                                                                                                                                  
	                                                                                                                                                                                                                                                              
	                                                                                                                                                                                                                                                              
		// },                                                                                                                                                                                                                                                        
		whitespace2Char: function (sOriginalText) {                                                                                                                                                                                                                  
			var sWhitespace = " ",                                                                                                                                                                                                                                      
				sUnicodeWhitespaceCharacter = "\u00A0"; // Non-breaking whitespace                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			if (typeof sOriginalText !== "string") {                                                                                                                                                                                                                    
				return sOriginalText;                                                                                                                                                                                                                                      
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			return sOriginalText                                                                                                                                                                                                                                        
				.replaceAll((sWhitespace + sWhitespace), (sWhitespace + sUnicodeWhitespaceCharacter)); // replace spaces                                                                                                                                                   
		},                                                                                                                                                                                                                                                           
        valueHelpMotivo: function (oEvent) {                                                                                                                                                                                                                   
			this._oInputUfDestino2 = oEvent.getSource();                                                                                                                                                                                                                
			var oTextTemplate2 = new Text({ text: { path: 'motivomov' }, renderWhitespace: true });                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			sLinha = oEvent.getSource().getBindingContext().getObject();                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			this._oBasicSearchField2 = new SearchField({                                                                                                                                                                                                                
				search: function () {                                                                                                                                                                                                                                      
					this.oWhitespaceDialog2.getFilterBar().search();                                                                                                                                                                                                          
				}.bind(this)                                                                                                                                                                                                                                               
			});                                                                                                                                                                                                                                                         
			if (!this.pWhitespaceDialog2) {                                                                                                                                                                                                                             
				this.pWhitespaceDialog2 = this.loadFragment({                                                                                                                                                                                                              
					name: "br.com.simrede.mmbaseterceiro.ext.fragments.valueHelpMotivo"                                                                                                                                                                                       
				});                                                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
			this.pWhitespaceDialog2.then(function (oWhitespaceDialog2) {                                                                                                                                                                                                
				var oFilterBar2 = oWhitespaceDialog2.getFilterBar();                                                                                                                                                                                                       
				this.oWhitespaceDialog2 = oWhitespaceDialog2;                                                                                                                                                                                                              
				if (this._bWhitespaceDialogInitialized2) {                                                                                                                                                                                                                 
					oWhitespaceDialog2.open();                                                                                                                                                                                                                                
					return;                                                                                                                                                                                                                                                   
				}                                                                                                                                                                                                                                                          
				this.getView().addDependent(oWhitespaceDialog2);                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
				// Set Basic Search for FilterBar                                                                                                                                                                                                                          
				oFilterBar2.setFilterBarExpanded(false);                                                                                                                                                                                                                   
				oFilterBar2.setBasicSearch(this._oBasicSearchField2);                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
				// Re-map whitespaces                                                                                                                                                                                                                                      
				oFilterBar2.determineFilterItemByName("motivomov").getControl().setTextFormatter(this._inputTextFormatter);                                                                                                                                                
                                                                                                                                                                                                                                                               
				oWhitespaceDialog2.getTableAsync().then(function (oTable2) {                                                                                                                                                                                               
					oTable2.setModel(this.oModel);                                                                                                                                                                                                                            
					oTable2.setSelectionMode('Single');                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
					// For Desktop and tabled the default table is sap.ui.table.Table                                                                                                                                                                                         
					if (oTable2.bindRows) {                                                                                                                                                                                                                                   
						oTable2.addColumn(new UIColumn({ label: "Motivo", template: oTextTemplate2 }));                                                                                                                                                                          
						oTable2.addColumn(new UIColumn({ label: "Descrição", template: "Grtxt" }));                                                                                                                                                                              
						oTable2.bindAggregation("rows", {                                                                                                                                                                                                                        
							path: "/ZI_MM_VH_GRUND",                                                                                                                                                                                                                                
							events: {                                                                                                                                                                                                                                               
								dataReceived: function () {                                                                                                                                                                                                                            
									oWhitespaceDialog2.update();                                                                                                                                                                                                                          
								}                                                                                                                                                                                                                                                      
							}                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					// For Mobile the default table is sap.m.Table                                                                                                                                                                                                            
					if (oTable2.bindItems) {                                                                                                                                                                                                                                  
						oTable2.addColumn(new MColumn({ header: new Label({ text: "Motivo" }) }));                                                                                                                                                                               
						oTable2.addColumn(new MColumn({ header: new Label({ text: "Descricao" }) }));                                                                                                                                                                            
						oTable2.bindItems({                                                                                                                                                                                                                                      
							path: "/ZI_MM_VH_GRUND",                                                                                                                                                                                                                                
							template: new ColumnListItem({                                                                                                                                                                                                                          
								cells: [new Label({ text: "{motivomov}" }), new Label({ text: "{Grtxt}" })]                                                                                                                                                                            
							}),                                                                                                                                                                                                                                                     
							events: {                                                                                                                                                                                                                                               
								dataReceived: function () {                                                                                                                                                                                                                            
									oWhitespaceDialog2.update();                                                                                                                                                                                                                          
								}                                                                                                                                                                                                                                                      
							}                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					oWhitespaceDialog2.update();                                                                                                                                                                                                                              
				}.bind(this));                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
				this._bWhitespaceDialogInitialized2 = true;                                                                                                                                                                                                                
				oWhitespaceDialog2.open();                                                                                                                                                                                                                                 
			}.bind(this));                                                                                                                                                                                                                                              
		},                                                                                                                                                                                                                                                           
		onSearchMotivo: function (oEvent) {                                                                                                                                                                                                                          
			var sSearchQuery = this._oBasicSearchField2.getValue(),                                                                                                                                                                                                     
				aSelectionSet = oEvent.getParameter("selectionSet");                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			var aFilters = aSelectionSet.reduce(function (aResult, oControl) {                                                                                                                                                                                          
				if (oControl.getValue()) {                                                                                                                                                                                                                                 
					aResult.push(new Filter({                                                                                                                                                                                                                                 
						path: oControl.getName(),                                                                                                                                                                                                                                
						operator: FilterOperator.Contains,                                                                                                                                                                                                                       
						value1: oControl.getValue()                                                                                                                                                                                                                              
					}));                                                                                                                                                                                                                                                      
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				return aResult;                                                                                                                                                                                                                                            
			}, []);                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			aFilters.push(new Filter({                                                                                                                                                                                                                                  
				filters: [                                                                                                                                                                                                                                                 
					new Filter({ path: "motivomov", operator: FilterOperator.Contains, value1: sSearchQuery }),                                                                                                                                                               
					new Filter({ path: "Grtxt", operator: FilterOperator.Contains, value1: sSearchQuery })                                                                                                                                                                    
				],                                                                                                                                                                                                                                                         
				and: false                                                                                                                                                                                                                                                 
			}));                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			this._filterTableMotivo(new Filter({                                                                                                                                                                                                                        
				filters: aFilters,                                                                                                                                                                                                                                         
				and: true                                                                                                                                                                                                                                                  
			}));                                                                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
		onSuggestionItemSelectedMotivo: function (oEvent) {                                                                                                                                                                                                          
			var sRegion = this.byId("inRegion").getValue();                                                                                                                                                                                                             
			var sRegionName = this.byId("inRegionName").getValue();                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			let aFilters;                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			if (sRegion && !sRegionName) {                                                                                                                                                                                                                              
				aFilters = [                                                                                                                                                                                                                                               
					new Filter("motivomov", FilterOperator.EQ, sRegion)                                                                                                                                                                                                       
				]                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			if (!sRegion && sRegionName) {                                                                                                                                                                                                                              
				aFilters = [                                                                                                                                                                                                                                               
					new Filter("Grtxt", FilterOperator.EQ, sRegionName)                                                                                                                                                                                                       
				]                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			if (sRegion && sRegionName) {                                                                                                                                                                                                                               
				aFilters = [                                                                                                                                                                                                                                               
					new Filter("motivomov", FilterOperator.EQ, sRegion),                                                                                                                                                                                                      
					new Filter("Grtxt", FilterOperator.EQ, sRegionName)                                                                                                                                                                                                       
				]                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			this._filterTableMotivo(new Filter({                                                                                                                                                                                                                        
				filters: aFilters,                                                                                                                                                                                                                                         
				and: true                                                                                                                                                                                                                                                  
			}));                                                                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
		onCancelPressMotivo: function (oEvent) {                                                                                                                                                                                                                     
			this.oWhitespaceDialog2.close();                                                                                                                                                                                                                            
		},                                                                                                                                                                                                                                                           
		onOkPressMotivo: function (oEvent) {	                                                                                                                                                                                                                        
			var aTokens = oEvent.getParameter("tokens");                                                                                                                                                                                                                
			var vNewUsedStock;                                                                                                                                                                                                                                          
			aTokens.forEach(function (oToken) {                                                                                                                                                                                                                         
				oToken.setText(this.whitespace2Char(oToken.getText()));                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				vNewUsedStock = oToken.getKey();                                                                                                                                                                                                                           
			}.bind(this));                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
			this._oInputUfDestino2.setSelectedKey(aTokens[0].getKey());                                                                                                                                                                                                 
			this.oWhitespaceDialog2.close();                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			var that = this;                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			var oBindingContext = this._oInputUfDestino2.getBindingContext();                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			/* ===================================================================&nbsp;                                                                                                                                                                                
			Chama Action no Behavior da CDS&nbsp;                                                                                                                                                                                                                       
			=================================================================== */                                                                                                                                                                                      
			var fnFunction = function () {                                                                                                                                                                                                                              
				return new Promise(function (fnResolve, fnReject) {                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
					that.extensionAPI.invokeActions(                                                                                                                                                                                                                          
						"motivo",                                                                                                                                                                                                                                                
						oBindingContext,                                                                                                                                                                                                                                         
						{                                                                                                                                                                                                                                                        
							"motivomov": vNewUsedStock                                                                                                                                                                                                                              
						},                                                                                                                                                                                                                                                       
					).then(function (data) {                                                                                                                                                                                                                                  
						fnResolve();                                                                                                                                                                                                                                             
						that.templateBaseExtension.getExtensionAPI().refreshTable();                                                                                                                                                                                             
						that.getView().getModel().refresh();                                                                                                                                                                                                                     
					});                                                                                                                                                                                                                                                       
				});                                                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			var mParameters = {                                                                                                                                                                                                                                         
				busy: {                                                                                                                                                                                                                                                    
					set: true,                                                                                                                                                                                                                                                
					check: false                                                                                                                                                                                                                                              
				},                                                                                                                                                                                                                                                         
				dataloss: {                                                                                                                                                                                                                                                
					popup: false,                                                                                                                                                                                                                                             
					navigation: false                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			};                                                                                                                                                                                                                                                          
			var teste = this.extensionAPI.securedExecution(fnFunction, mParameters);                                                                                                                                                                                    
		},                                                                                                                                                                                                                                                           
		onSubmitMotivo: function (oEvent) {                                                                                                                                                                                                                          
			let vUfDestino = oEvent.getParameters().value;                                                                                                                                                                                                              
			var that = this;                                                                                                                                                                                                                                            
			var vIdRow = oEvent.getSource().getParent().sId                                                                                                                                                                                                             
			var oBindingContext = oEvent.getSource().getBindingContext();                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			let oModel = this.getView().getModel();                                                                                                                                                                                                                     
			/* ===================================================================&nbsp;                                                                                                                                                                                
			Faz a leitura na CDS para validar se existe o registro&nbsp;                                                                                                                                                                                                
			=================================================================== */                                                                                                                                                                                      
			var fnFunction = function () {                                                                                                                                                                                                                              
                return new Promise(function (fnResolve, fnReject) {                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
                    that.extensionAPI.invokeActions(                                                                                                                                                                                                           
                        "motivo",                                                                                                                                                                                                                              
                       oBindingContext,                                                                                                                                                                                                                        
                       {                                                                                                                                                                                                                                       
                            "motivomov": vNewUsedStock                                                                                                                                                                                                         
                        },&nbsp;                                                                                                                                                                                                                               
                    ).then(function (data) {                                                                                                                                                                                                                   
                        fnResolve();                                                                                                                                                                                                                           
                        that.templateBaseExtension.getExtensionAPI().refreshTable();                                                                                                                                                                           
                        that.getView().getModel().refresh();                                                                                                                                                                                                   
                    });                                                                                                                                                                                                                                        
                });                                                                                                                                                                                                                                            
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            var mParameters = {                                                                                                                                                                                                                                
                busy: {                                                                                                                                                                                                                                        
                    set: true,                                                                                                                                                                                                                                 
                    check: false                                                                                                                                                                                                                               
                },                                                                                                                                                                                                                                             
                dataloss: {                                                                                                                                                                                                                                    
                    popup: false,                                                                                                                                                                                                                              
                    navigation: false                                                                                                                                                                                                                          
                }                                                                                                                                                                                                                                              
            };                                                                                                                                                                                                                                                 
            this.extensionAPI.securedExecution(fnFunction, mParameters);                                                                                                                                                                                       
		},                                                                                                                                                                                                                                                           
		onliveChangeMotivo: function (oEvent) {                                                                                                                                                                                                                      
			var input = oEvent.getSource();                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			input.setValue(input.getValue().toUpperCase());                                                                                                                                                                                                             
		},valueHelpTipo: function (oEvent) {                                                                                                                                                                                                                         
			this._oInputCentro2 = oEvent.getSource();                                                                                                                                                                                                                   
			var oTextTemplate3 = new Text({ text: { path: 'tipomov' }, renderWhitespace: true });                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			sLinha = oEvent.getSource().getBindingContext().getObject();                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			this._oBasicSearchField3 = new SearchField({                                                                                                                                                                                                                
				search: function () {                                                                                                                                                                                                                                      
					this.oWhitespaceDialog3.getFilterBar().search();                                                                                                                                                                                                          
				}.bind(this)                                                                                                                                                                                                                                               
			});                                                                                                                                                                                                                                                         
			if (!this.pWhitespaceDialog3) {                                                                                                                                                                                                                             
				this.pWhitespaceDialog3 = this.loadFragment({                                                                                                                                                                                                              
					name: "br.com.simrede.mmbaseterceiro.ext.fragments.valueHelpTipo"                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
			this.pWhitespaceDialog3.then(function (oWhitespaceDialog3) {                                                                                                                                                                                                
				var oFilterBar3 = oWhitespaceDialog3.getFilterBar();                                                                                                                                                                                                       
				this.oWhitespaceDialog3 = oWhitespaceDialog3;                                                                                                                                                                                                              
				if (this._bWhitespaceDialogInitialized3) {                                                                                                                                                                                                                 
					oWhitespaceDialog3.open();                                                                                                                                                                                                                                
					return;                                                                                                                                                                                                                                                   
				}                                                                                                                                                                                                                                                          
				this.getView().addDependent(oWhitespaceDialog3);                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
				// Set Basic Search for FilterBar                                                                                                                                                                                                                          
				oFilterBar3.setFilterBarExpanded(false);                                                                                                                                                                                                                   
				oFilterBar3.setBasicSearch(this._oBasicSearchField3);                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
				// Re-map whitespaces                                                                                                                                                                                                                                      
				oFilterBar3.determineFilterItemByName("tipomov").getControl().setTextFormatter(this._inputTextFormatter);                                                                                                                                                  
                                                                                                                                                                                                                                                               
				oWhitespaceDialog3.getTableAsync().then(function (oTable3) {                                                                                                                                                                                               
					oTable3.setModel(this.oModel);                                                                                                                                                                                                                            
					oTable3.setSelectionMode('Single');                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
					// For Desktop and tabled the default table is sap.ui.table.Table                                                                                                                                                                                         
					if (oTable3.bindRows) {                                                                                                                                                                                                                                   
						oTable3.addColumn(new UIColumn({ label: "Tipo de movimento", template: oTextTemplate3 }));                                                                                                                                                               
						oTable3.bindAggregation("rows", {                                                                                                                                                                                                                        
							path: "/ZI_MM_VH_BWART",                                                                                                                                                                                                                                
							events: {                                                                                                                                                                                                                                               
								dataReceived: function () {                                                                                                                                                                                                                            
									oWhitespaceDialog3.update();                                                                                                                                                                                                                          
								}                                                                                                                                                                                                                                                      
							}                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					// For Mobile the default table is sap.m.Table                                                                                                                                                                                                            
					if (oTable3.bindItems) {                                                                                                                                                                                                                                  
						oTable3.addColumn(new MColumn({ header: new Label({ text: "Centro" }) }));                                                                                                                                                                               
						oTable3.bindItems({                                                                                                                                                                                                                                      
							path: "/ZI_MM_VH_BWART",                                                                                                                                                                                                                                
							events: {                                                                                                                                                                                                                                               
								dataReceived: function () {                                                                                                                                                                                                                            
									oWhitespaceDialog3.update();                                                                                                                                                                                                                          
								}                                                                                                                                                                                                                                                      
							}                                                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					oWhitespaceDialog3.update();                                                                                                                                                                                                                              
				}.bind(this));                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
				this._bWhitespaceDialogInitialized3 = true;                                                                                                                                                                                                                
				oWhitespaceDialog3.open();                                                                                                                                                                                                                                 
			}.bind(this));                                                                                                                                                                                                                                              
		},                                                                                                                                                                                                                                                           
		onSearchTipo: function (oEvent) {                                                                                                                                                                                                                            
			var sSearchQuery = this._oBasicSearchField3.getValue(),                                                                                                                                                                                                     
				aSelectionSet = oEvent.getParameter("selectionSet");                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			var aFilters = aSelectionSet.reduce(function (aResult, oControl) {                                                                                                                                                                                          
				if (oControl.getValue()) {                                                                                                                                                                                                                                 
					aResult.push(new Filter({                                                                                                                                                                                                                                 
						path: oControl.getName(),                                                                                                                                                                                                                                
						operator: FilterOperator.Contains,                                                                                                                                                                                                                       
						value1: oControl.getValue()                                                                                                                                                                                                                              
					}));                                                                                                                                                                                                                                                      
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				return aResult;                                                                                                                                                                                                                                            
			}, []);                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			aFilters.push(new Filter({                                                                                                                                                                                                                                  
				filters: [                                                                                                                                                                                                                                                 
					new Filter({ path: "tipomov", operator: FilterOperator.Contains, value1: sSearchQuery })                                                                                                                                                                  
				],                                                                                                                                                                                                                                                         
				and: false                                                                                                                                                                                                                                                 
			}));                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			this._filterTableTipo(new Filter({                                                                                                                                                                                                                          
				filters: aFilters,                                                                                                                                                                                                                                         
				and: true                                                                                                                                                                                                                                                  
			}));                                                                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
		onSuggestionItemSelectedTipo: function (oEvent) {                                                                                                                                                                                                            
			var sPlant = this.byId("inTipo").getValue();                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			let aFilters;                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			if (sPlant) {                                                                                                                                                                                                                                               
				aFilters = [                                                                                                                                                                                                                                               
					new Filter("tipomov", FilterOperator.EQ, sPlant)                                                                                                                                                                                                          
				]                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			this._filterTableTipo(new Filter({                                                                                                                                                                                                                          
				filters: aFilters,                                                                                                                                                                                                                                         
				and: true                                                                                                                                                                                                                                                  
			}));                                                                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
		onCancelPressTipo: function (oEvent) {                                                                                                                                                                                                                       
			this.oWhitespaceDialog3.close();                                                                                                                                                                                                                            
		},                                                                                                                                                                                                                                                           
		onOkPressTipo: function (oEvent) {                                                                                                                                                                                                                           
			var aTokens = oEvent.getParameter("tokens");                                                                                                                                                                                                                
			var vNewUsedStock;                                                                                                                                                                                                                                          
			aTokens.forEach(function (oToken) {                                                                                                                                                                                                                         
				oToken.setText(this.whitespace2Char(oToken.getText()));                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				vNewUsedStock = oToken.getKey();                                                                                                                                                                                                                           
			}.bind(this));                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
			this._oInputCentro2.setSelectedKey(aTokens[0].getKey());                                                                                                                                                                                                    
			this.oWhitespaceDialog3.close();                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			var that = this;                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			var oBindingContext = this._oInputCentro2.getBindingContext();                                                                                                                                                                                              
            /* ===================================================================&nbsp;                                                                                                                                                                       
            Chama Action no Behavior da CDS&nbsp;                                                                                                                                                                                                              
            =================================================================== */                                                                                                                                                                             
           var fnFunction = function () {                                                                                                                                                                                                                      
                return new Promise(function (fnResolve, fnReject) {                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
                    that.extensionAPI.invokeActions(                                                                                                                                                                                                           
                        "tipomov",                                                                                                                                                                                                                             
                       oBindingContext,                                                                                                                                                                                                                        
                       {                                                                                                                                                                                                                                       
                            "tipomov": vNewUsedStock                                                                                                                                                                                                           
                        },&nbsp;                                                                                                                                                                                                                               
                    ).then(function (data) {                                                                                                                                                                                                                   
                        fnResolve();                                                                                                                                                                                                                           
                        that.templateBaseExtension.getExtensionAPI().refreshTable();                                                                                                                                                                           
                        that.getView().getModel().refresh();                                                                                                                                                                                                   
                    });                                                                                                                                                                                                                                        
                });                                                                                                                                                                                                                                            
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            var mParameters = {                                                                                                                                                                                                                                
                busy: {                                                                                                                                                                                                                                        
                    set: true,                                                                                                                                                                                                                                 
                    check: false                                                                                                                                                                                                                               
                },                                                                                                                                                                                                                                             
                dataloss: {                                                                                                                                                                                                                                    
                    popup: false,                                                                                                                                                                                                                              
                    navigation: false                                                                                                                                                                                                                          
                }                                                                                                                                                                                                                                              
            };                                                                                                                                                                                                                                                 
            this.extensionAPI.securedExecution(fnFunction, mParameters);                                                                                                                                                                                       
		},                                                                                                                                                                                                                                                           
		onSubmitTipo: function (oEvent) {                                                                                                                                                                                                                            
			let vCentro = oEvent.getParameters().value;                                                                                                                                                                                                                 
			var that = this;                                                                                                                                                                                                                                            
			var vIdRow = oEvent.getSource().getParent().sId                                                                                                                                                                                                             
			var oBindingContext = oEvent.getSource().getBindingContext();                                                                                                                                                                                               
			let oModel = this.getView().getModel();                                                                                                                                                                                                                     
			/* ===================================================================&nbsp;                                                                                                                                                                                
			Faz a leitura na CDS para validar se existe o registro&nbsp;                                                                                                                                                                                                
			=================================================================== */                                                                                                                                                                                      
			var fnFunction = function () {                                                                                                                                                                                                                              
                return new Promise(function (fnResolve, fnReject) {                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
                    that.extensionAPI.invokeActions(                                                                                                                                                                                                           
                        "tipomov",                                                                                                                                                                                                                             
                       oBindingContext,                                                                                                                                                                                                                        
                       {                                                                                                                                                                                                                                       
                            "tipomov": vNewUsedStock                                                                                                                                                                                                           
                        },&nbsp;                                                                                                                                                                                                                               
                    ).then(function (data) {                                                                                                                                                                                                                   
                        fnResolve();                                                                                                                                                                                                                           
                        that.templateBaseExtension.getExtensionAPI().refreshTable();                                                                                                                                                                           
                        that.getView().getModel().refresh();                                                                                                                                                                                                   
                    });                                                                                                                                                                                                                                        
                });                                                                                                                                                                                                                                            
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            var mParameters = {                                                                                                                                                                                                                                
                busy: {                                                                                                                                                                                                                                        
                    set: true,                                                                                                                                                                                                                                 
                    check: false                                                                                                                                                                                                                               
                },                                                                                                                                                                                                                                             
                dataloss: {                                                                                                                                                                                                                                    
                    popup: false,                                                                                                                                                                                                                              
                    navigation: false                                                                                                                                                                                                                          
                }                                                                                                                                                                                                                                              
            };                                                                                                                                                                                                                                                 
            this.extensionAPI.securedExecution(fnFunction, mParameters);                                                                                                                                                                                       
		},                                                                                                                                                                                                                                                           
		onliveChangeTipo: function (oEvent) {                                                                                                                                                                                                                        
			var input = oEvent.getSource();                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			input.setValue(input.getValue().toUpperCase());                                                                                                                                                                                                             
		},                                                                                                                                                                                                                                                           
		_filterTableTipo: function (oFilter) {                                                                                                                                                                                                                       
			var oValueHelpDialog = this.oWhitespaceDialog3;                                                                                                                                                                                                             
			oValueHelpDialog.getTableAsync().then(function (oTable) {                                                                                                                                                                                                   
				if (oTable.bindRows) {                                                                                                                                                                                                                                     
					oTable.getBinding("rows").filter(oFilter);                                                                                                                                                                                                                
				}                                                                                                                                                                                                                                                          
				if (oTable.bindItems) {                                                                                                                                                                                                                                    
					oTable.getBinding("items").filter(oFilter);                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
				oValueHelpDialog.update();                                                                                                                                                                                                                                 
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		_filterTableMotivo: function (oFilter) {                                                                                                                                                                                                                     
			var oValueHelpDialog = this.oWhitespaceDialog2;                                                                                                                                                                                                             
			oValueHelpDialog.getTableAsync().then(function (oTable) {                                                                                                                                                                                                   
				if (oTable.bindRows) {                                                                                                                                                                                                                                     
					oTable.getBinding("rows").filter(oFilter);                                                                                                                                                                                                                
				}                                                                                                                                                                                                                                                          
				if (oTable.bindItems) {                                                                                                                                                                                                                                    
					oTable.getBinding("items").filter(oFilter);                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
				oValueHelpDialog.update();                                                                                                                                                                                                                                 
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
        onDescarga: function (oEvent) {                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
            var that = this;                                                                                                                                                                                                                                   
            var oInput = oEvent.getSource();                                                                                                                                                                                                                   
            var oBindingContext = oEvent.getSource().getBindingContext();                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            var vNewUsedStock = parseFloat( oInput.getValue() );                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
            /* ===================================================================&nbsp;                                                                                                                                                                       
            Chama Action no Behavior da CDS&nbsp;                                                                                                                                                                                                              
            =================================================================== */                                                                                                                                                                             
           var fnFunction = function () {                                                                                                                                                                                                                      
                return new Promise(function (fnResolve, fnReject) {                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
                    that.extensionAPI.invokeActions(                                                                                                                                                                                                           
                        "/descarga",                                                                                                                                                                                                                           
                       oBindingContext,                                                                                                                                                                                                                        
                       {                                                                                                                                                                                                                                       
                            "descarga": vNewUsedStock                                                                                                                                                                                                          
                        },&nbsp;                                                                                                                                                                                                                               
                    ).then(function (data) {                                                                                                                                                                                                                   
                        fnResolve();                                                                                                                                                                                                                           
                        that.templateBaseExtension.getExtensionAPI().refreshTable();                                                                                                                                                                           
                        that.getView().getModel().refresh();                                                                                                                                                                                                   
                    });                                                                                                                                                                                                                                        
                });                                                                                                                                                                                                                                            
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            var mParameters = {                                                                                                                                                                                                                                
                busy: {                                                                                                                                                                                                                                        
                    set: true,                                                                                                                                                                                                                                 
                    check: false                                                                                                                                                                                                                               
                },                                                                                                                                                                                                                                             
                dataloss: {                                                                                                                                                                                                                                    
                    popup: false,                                                                                                                                                                                                                              
                    navigation: false                                                                                                                                                                                                                          
                }                                                                                                                                                                                                                                              
            };                                                                                                                                                                                                                                                 
            this.extensionAPI.securedExecution(fnFunction, mParameters);                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
        }&nbsp;                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
    }                                                                                                                                                                                                                                                          
});                                                                                                                                                                                                                                                            